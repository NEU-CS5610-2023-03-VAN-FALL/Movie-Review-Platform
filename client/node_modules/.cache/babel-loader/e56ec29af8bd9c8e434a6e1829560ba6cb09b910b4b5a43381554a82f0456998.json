{"ast":null,"code":"var _jsxFileName = \"/Users/limingxi/Documents/5610/assignment-03-mingxi-li/client/src/AuthTokenContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useContext, useState, useEffect } from \"react\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthTokenContext = /*#__PURE__*/React.createContext();\nconst requestedScopes = [\"profile\", \"email\"];\nfunction AuthTokenProvider({\n  children\n}) {\n  _s();\n  const {\n    getAccessTokenSilently,\n    isAuthenticated\n  } = useAuth0();\n  const [accessToken, setAccessToken] = useState();\n  useEffect(() => {\n    const getAccessToken = async () => {\n      try {\n        // get access token silently from Auth0, which will be stored in the context\n        const token = await getAccessTokenSilently({\n          authorizationParams: {\n            audience: process.env.REACT_APP_AUTH0_AUDIENCE,\n            scope: requestedScopes.join(\" \")\n          }\n        });\n        setAccessToken(token);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    if (isAuthenticated) {\n      getAccessToken();\n    }\n  }, [getAccessTokenSilently, isAuthenticated]);\n  const value = {\n    accessToken,\n    setAccessToken\n  };\n  return /*#__PURE__*/_jsxDEV(AuthTokenContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n}\n_s(AuthTokenProvider, \"dWdvm8Rn0BAUsR36/g33e0tQgZc=\", false, function () {\n  return [useAuth0];\n});\n_c = AuthTokenProvider;\nconst useAuthToken = () => {\n  _s2();\n  return useContext(AuthTokenContext);\n};\n_s2(useAuthToken, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport { useAuthToken, AuthTokenProvider };\nvar _c;\n$RefreshReg$(_c, \"AuthTokenProvider\");","map":{"version":3,"names":["React","useContext","useState","useEffect","useAuth0","jsxDEV","_jsxDEV","AuthTokenContext","createContext","requestedScopes","AuthTokenProvider","children","_s","getAccessTokenSilently","isAuthenticated","accessToken","setAccessToken","getAccessToken","token","authorizationParams","audience","process","env","REACT_APP_AUTH0_AUDIENCE","scope","join","err","console","log","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuthToken","_s2","$RefreshReg$"],"sources":["/Users/limingxi/Documents/5610/assignment-03-mingxi-li/client/src/AuthTokenContext.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\n\nconst AuthTokenContext = React.createContext();\n\n\nconst requestedScopes = [\"profile\", \"email\"];\n\nfunction AuthTokenProvider({ children }) {\n  const { getAccessTokenSilently, isAuthenticated } = useAuth0();\n  const [accessToken, setAccessToken] = useState();\n\n  useEffect(() => {\n    const getAccessToken = async () => {\n      try {\n        // get access token silently from Auth0, which will be stored in the context\n        const token = await getAccessTokenSilently({\n          authorizationParams: {\n            audience: process.env.REACT_APP_AUTH0_AUDIENCE,\n            scope: requestedScopes.join(\" \"),\n          },\n        });\n        setAccessToken(token);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    if (isAuthenticated) {\n      getAccessToken();\n    }\n  }, [getAccessTokenSilently, isAuthenticated]);\n\n  const value = { accessToken, setAccessToken };\n  return (\n    <AuthTokenContext.Provider value={value}>\n      {children}\n    </AuthTokenContext.Provider>\n  );\n}\n\nconst useAuthToken = () => useContext(AuthTokenContext);\n\nexport { useAuthToken, AuthTokenProvider };\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC9D,SAASC,QAAQ,QAAQ,oBAAoB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9C,MAAMC,gBAAgB,gBAAGP,KAAK,CAACQ,aAAa,CAAC,CAAC;AAG9C,MAAMC,eAAe,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC;AAE5C,SAASC,iBAAiBA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EACvC,MAAM;IAAEC,sBAAsB;IAAEC;EAAgB,CAAC,GAAGV,QAAQ,CAAC,CAAC;EAC9D,MAAM,CAACW,WAAW,EAAEC,cAAc,CAAC,GAAGd,QAAQ,CAAC,CAAC;EAEhDC,SAAS,CAAC,MAAM;IACd,MAAMc,cAAc,GAAG,MAAAA,CAAA,KAAY;MACjC,IAAI;QACF;QACA,MAAMC,KAAK,GAAG,MAAML,sBAAsB,CAAC;UACzCM,mBAAmB,EAAE;YACnBC,QAAQ,EAAEC,OAAO,CAACC,GAAG,CAACC,wBAAwB;YAC9CC,KAAK,EAAEf,eAAe,CAACgB,IAAI,CAAC,GAAG;UACjC;QACF,CAAC,CAAC;QACFT,cAAc,CAACE,KAAK,CAAC;MACvB,CAAC,CAAC,OAAOQ,GAAG,EAAE;QACZC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MAClB;IACF,CAAC;IAED,IAAIZ,eAAe,EAAE;MACnBG,cAAc,CAAC,CAAC;IAClB;EACF,CAAC,EAAE,CAACJ,sBAAsB,EAAEC,eAAe,CAAC,CAAC;EAE7C,MAAMe,KAAK,GAAG;IAAEd,WAAW;IAAEC;EAAe,CAAC;EAC7C,oBACEV,OAAA,CAACC,gBAAgB,CAACuB,QAAQ;IAACD,KAAK,EAAEA,KAAM;IAAAlB,QAAA,EACrCA;EAAQ;IAAAoB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACgB,CAAC;AAEhC;AAACtB,EAAA,CA/BQF,iBAAiB;EAAA,QAC4BN,QAAQ;AAAA;AAAA+B,EAAA,GADrDzB,iBAAiB;AAiC1B,MAAM0B,YAAY,GAAGA,CAAA;EAAAC,GAAA;EAAA,OAAMpC,UAAU,CAACM,gBAAgB,CAAC;AAAA;AAAC8B,GAAA,CAAlDD,YAAY;AAElB,SAASA,YAAY,EAAE1B,iBAAiB;AAAG,IAAAyB,EAAA;AAAAG,YAAA,CAAAH,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}