{"ast":null,"code":"var _jsxFileName = \"/Users/limingxi/Documents/5610/assignment-03-mingxi-li/client/src/components/App.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const {\n    isAuthenticated,\n    getAccessTokenSilently\n  } = useAuth0();\n  const [userLatestReview, setUserLatestReview] = useState(null);\n  console.log();\n  useEffect(() => {\n    const fetchUserLatestReview = async () => {\n      try {\n        if (isAuthenticated) {\n          const accessToken = await getAccessTokenSilently();\n          const response = await fetch(`${process.env.REACT_APP_API_URL}/user-reviews`, {\n            method: \"GET\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${accessToken}`\n            }\n          });\n          if (response.ok) {\n            const userReviews = await response.json();\n            if (userReviews.length > 0) {\n              setUserLatestReview(userReviews[0]);\n            }\n          } else {\n            console.error(\"Error fetching user's latest review:\", response.statusText);\n          }\n        }\n      } catch (error) {\n        console.error(\"Error fetching user's latest review:\", error);\n      }\n    };\n    fetchUserLatestReview();\n  }, [isAuthenticated, getAccessTokenSilently]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"User's Latest Movie Review\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), isAuthenticated && userLatestReview ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Movie: \", userLatestReview.movie.title]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Review: \", userLatestReview.content]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"By: \", userLatestReview.user.username]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Created at: \", new Date(userLatestReview.createdAt).toLocaleString()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No reviews by you yet. Start writing now!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"3aEFMeyiEQqph5A+nji6ArJ3NC8=\", false, function () {\n  return [useAuth0];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useAuth0","jsxDEV","_jsxDEV","App","_s","isAuthenticated","getAccessTokenSilently","userLatestReview","setUserLatestReview","console","log","fetchUserLatestReview","accessToken","response","fetch","process","env","REACT_APP_API_URL","method","headers","Authorization","ok","userReviews","json","length","error","statusText","children","fileName","_jsxFileName","lineNumber","columnNumber","movie","title","content","user","username","Date","createdAt","toLocaleString","_c","$RefreshReg$"],"sources":["/Users/limingxi/Documents/5610/assignment-03-mingxi-li/client/src/components/App.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\n\nconst App = () => {\n  const { isAuthenticated, getAccessTokenSilently } = useAuth0();\n  const [userLatestReview, setUserLatestReview] = useState(null);\n  console.log()\n  useEffect(() => {\n    const fetchUserLatestReview = async () => {\n      try {\n        if (isAuthenticated) {\n          const accessToken = await getAccessTokenSilently();\n\n          const response = await fetch(\n            `${process.env.REACT_APP_API_URL}/user-reviews`,\n            {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: `Bearer ${accessToken}`,\n              },\n            }\n          );\n\n          if (response.ok) {\n            const userReviews = await response.json();\n            if (userReviews.length > 0) {\n              setUserLatestReview(userReviews[0]);\n            }\n          } else {\n            console.error(\"Error fetching user's latest review:\", response.statusText);\n          }\n        }\n      } catch (error) {\n        console.error(\"Error fetching user's latest review:\", error);\n      }\n    };\n\n    fetchUserLatestReview();\n  }, [isAuthenticated, getAccessTokenSilently]);\n\n  return (\n    <div>\n      <h1>User's Latest Movie Review</h1>\n      {isAuthenticated && userLatestReview ? (\n        <div>\n          <p>Movie: {userLatestReview.movie.title}</p>\n          <p>Review: {userLatestReview.content}</p>\n          <p>By: {userLatestReview.user.username}</p>\n          <p>Created at: {new Date(userLatestReview.createdAt).toLocaleString()}</p>\n        </div>\n      ) : (\n        <p>No reviews by you yet. Start writing now!</p>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}