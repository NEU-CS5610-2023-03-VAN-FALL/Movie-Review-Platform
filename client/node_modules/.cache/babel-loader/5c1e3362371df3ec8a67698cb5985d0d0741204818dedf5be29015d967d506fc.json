{"ast":null,"code":"var _jsxFileName = \"/Users/limingxi/Documents/5610/assignment-03-mingxi-li/client/src/components/App.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport \"../style/app.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const {\n    isAuthenticated,\n    getAccessTokenSilently\n  } = useAuth0();\n  const [userLatestReview, setUserLatestReview] = useState(null);\n  useEffect(() => {\n    const fetchUserLatestReview = async () => {\n      try {\n        if (isAuthenticated) {\n          const accessToken = await getAccessTokenSilently();\n          const response = await fetch(`${process.env.REACT_APP_API_URL}/user-reviews`, {\n            method: \"GET\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${accessToken}`\n            }\n          });\n          if (response.ok) {\n            const userReviews = await response.json();\n            if (userReviews.length > 0) {\n              setUserLatestReview(userReviews[0]);\n            }\n          } else {\n            console.error(\"Error fetching user's latest review:\", response.statusText);\n          }\n        }\n      } catch (error) {\n        console.error(\"Error fetching user's latest review:\", error);\n      }\n    };\n    fetchUserLatestReview();\n  }, [isAuthenticated, getAccessTokenSilently]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Your Latest Movie Review\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), isAuthenticated && userLatestReview ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"review-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Movie: \", userLatestReview.movie.title]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Review: \", userLatestReview.content]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Created at:\", \" \", new Date(userLatestReview.createdAt).toLocaleString()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No reviews by you yet. Start writing now!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"3aEFMeyiEQqph5A+nji6ArJ3NC8=\", false, function () {\n  return [useAuth0];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useAuth0","jsxDEV","_jsxDEV","App","_s","isAuthenticated","getAccessTokenSilently","userLatestReview","setUserLatestReview","fetchUserLatestReview","accessToken","response","fetch","process","env","REACT_APP_API_URL","method","headers","Authorization","ok","userReviews","json","length","console","error","statusText","className","children","fileName","_jsxFileName","lineNumber","columnNumber","movie","title","content","Date","createdAt","toLocaleString","_c","$RefreshReg$"],"sources":["/Users/limingxi/Documents/5610/assignment-03-mingxi-li/client/src/components/App.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport \"../style/app.css\";\nconst App = () => {\n  const { isAuthenticated, getAccessTokenSilently } = useAuth0();\n  const [userLatestReview, setUserLatestReview] = useState(null);\n\n  useEffect(() => {\n    const fetchUserLatestReview = async () => {\n      try {\n        if (isAuthenticated) {\n          const accessToken = await getAccessTokenSilently();\n\n          const response = await fetch(\n            `${process.env.REACT_APP_API_URL}/user-reviews`,\n            {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: `Bearer ${accessToken}`,\n              },\n            }\n          );\n\n          if (response.ok) {\n            const userReviews = await response.json();\n            if (userReviews.length > 0) {\n              setUserLatestReview(userReviews[0]);\n            }\n          } else {\n            console.error(\"Error fetching user's latest review:\", response.statusText);\n          }\n        }\n      } catch (error) {\n        console.error(\"Error fetching user's latest review:\", error);\n      }\n    };\n\n    fetchUserLatestReview();\n  }, [isAuthenticated, getAccessTokenSilently]);\n\n  return (\n    <div className=\"app-container\">\n      <h1>Your Latest Movie Review</h1>\n      {isAuthenticated && userLatestReview ? (\n        <div className=\"review-container\">\n          <p>Movie: {userLatestReview.movie.title}</p>\n          <p>Review: {userLatestReview.content}</p>\n          <p>\n            Created at:{\" \"}\n            {new Date(userLatestReview.createdAt).toLocaleString()}\n          </p>\n        </div>\n      ) : (\n        <p>No reviews by you yet. Start writing now!</p>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}